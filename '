import { UserProfile } from "@/lib/UserProfile";

type POJO = boolean | string | number | {[key:string]: POJO} | Array<POJO>

type GenericErrorId = "ERR_UNAUTHORIZED" | "ERR_CSRF_TOKEN"

type ErrorId = GenericErrorId

type User = {
  id: string;
  email: string;
  urlSlug?: string;
  profile: POJO;
  createdAt: number;
  signupCodeName?: string;
  unsolicited?: true;
  isAdmin?: true;
  isBanned?: true;
  lastFullPageLoad?: number;
  lastWrite?: number;
  updatedAt?: number;
}

interface Failure = {
  success: false;
  errorId: ErrorId;
  errorMsg?: string;
}
interface Success = {
  success: true;
  payload: POJO;
}

interface Wrapper = {
  action: string;
  status: number;
  result: Success | Failure;
}

interface MeSuccess extends Success {
  payload: User;
}
interface MeResponse extends Wrapper {
  result: MeSuccess | Failure
}

export { Wrapper, POJO, MeResponse, ErrorId }
