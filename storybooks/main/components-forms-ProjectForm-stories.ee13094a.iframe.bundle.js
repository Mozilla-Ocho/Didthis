"use strict";(self.webpackChunkappserver=self.webpackChunkappserver||[]).push([[982],{"./node_modules/@babel/runtime/helpers/esm/slicedToArray.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}__webpack_require__.d(__webpack_exports__,{Z:()=>_slicedToArray})},"./src/components/forms/ProjectForm.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,TrialAccount:()=>TrialAccount,default:()=>__WEBPACK_DEFAULT_EXPORT__});var _Default$parameters,_Default$parameters2,_TrialAccount$paramet,_TrialAccount$paramet2,_home_runner_work_Didthis_Didthis_appserver_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_mocks_store_storybook__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/mocks/store/storybook.tsx"),_mocks_apiUser__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/mocks/apiUser.ts"),_mocks_apiProject__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/mocks/apiProject.ts"),_ProjectForm__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/forms/ProjectForm.tsx"),__jsx=(__webpack_require__("./src/styles/globals.css"),react__WEBPACK_IMPORTED_MODULE_0__.createElement);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,_home_runner_work_Didthis_Didthis_appserver_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_1__.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}const __WEBPACK_DEFAULT_EXPORT__={title:"components/forms/ProjectForm",component:_ProjectForm__WEBPACK_IMPORTED_MODULE_5__.Z,parameters:{layout:"centered"},argTypes:{}};var Default={args:{mode:"edit",project:_mocks_apiProject__WEBPACK_IMPORTED_MODULE_4__.Z},render:function render(args){return __jsx(_mocks_store_storybook__WEBPACK_IMPORTED_MODULE_2__.G,{authUser:_mocks_apiUser__WEBPACK_IMPORTED_MODULE_3__.ZP},__jsx(_ProjectForm__WEBPACK_IMPORTED_MODULE_5__.Z,args))}},TrialAccount={args:{mode:"edit",project:_mocks_apiProject__WEBPACK_IMPORTED_MODULE_4__.Z},render:function render(args){return __jsx(_mocks_store_storybook__WEBPACK_IMPORTED_MODULE_2__.G,{authUser:_objectSpread(_objectSpread({},_mocks_apiUser__WEBPACK_IMPORTED_MODULE_3__.ZP),{},{isTrial:!0})},__jsx(_ProjectForm__WEBPACK_IMPORTED_MODULE_5__.Z,args))}};Default.parameters=_objectSpread(_objectSpread({},Default.parameters),{},{docs:_objectSpread(_objectSpread({},null===(_Default$parameters=Default.parameters)||void 0===_Default$parameters?void 0:_Default$parameters.docs),{},{source:_objectSpread({originalSource:"{\n  args: {\n    mode: 'edit',\n    project\n  },\n  render: args => <MockStoreWrapper authUser={authUser}>\n      <ProjectForm {...args} />\n    </MockStoreWrapper>\n}"},null===(_Default$parameters2=Default.parameters)||void 0===_Default$parameters2||null===(_Default$parameters2=_Default$parameters2.docs)||void 0===_Default$parameters2?void 0:_Default$parameters2.source)})}),TrialAccount.parameters=_objectSpread(_objectSpread({},TrialAccount.parameters),{},{docs:_objectSpread(_objectSpread({},null===(_TrialAccount$paramet=TrialAccount.parameters)||void 0===_TrialAccount$paramet?void 0:_TrialAccount$paramet.docs),{},{source:_objectSpread({originalSource:"{\n  args: {\n    mode: 'edit',\n    project\n  },\n  render: args => <MockStoreWrapper authUser={{\n    ...authUser,\n    isTrial: true\n  }}>\n      <ProjectForm {...args} />\n    </MockStoreWrapper>\n}"},null===(_TrialAccount$paramet2=TrialAccount.parameters)||void 0===_TrialAccount$paramet2||null===(_TrialAccount$paramet2=_TrialAccount$paramet2.docs)||void 0===_TrialAccount$paramet2?void 0:_TrialAccount$paramet2.source)})})},"./src/components/ImageUpload.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _home_runner_work_Didthis_Didthis_appserver_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_lib_cloudinaryConfig__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/lib/cloudinaryConfig.ts"),_uiLib__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/uiLib/index.tsx"),_lib_log__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/lib/log.ts"),_lib_store__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/lib/store/index.tsx"),_lib_trackingEvents__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/lib/trackingEvents.ts"),tailwind_merge__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/tailwind-merge/dist/lib/tw-merge.mjs"),__jsx=react__WEBPACK_IMPORTED_MODULE_0__.createElement;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,_home_runner_work_Didthis_Didthis_appserver_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_1__.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var ImageUpload=function ImageUpload(_ref){var intent=_ref.intent,onUploadWithUseCallback=_ref.onUploadWithUseCallback,className=_ref.className,isReplace=_ref.isReplace,required=_ref.required,_useState=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(),widget=_useState[0],setWidget=_useState[1],setRerenderDummyFn=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0)[1],store=(0,_lib_store__WEBPACK_IMPORTED_MODULE_5__.oR)();return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){var config=(0,_lib_cloudinaryConfig__WEBPACK_IMPORTED_MODULE_2__.bR)(intent),win=window;if(win.cloudinary){var theWidget=win.cloudinary.createUploadWidget(config,(function(error,result){!error&&result&&"success"===result.event&&(_lib_log__WEBPACK_IMPORTED_MODULE_4__.Z.debug("cloudinary result",result),store.trackEvent(_lib_trackingEvents__WEBPACK_IMPORTED_MODULE_6__.M.caUploadImage,{imgIntent:intent}),onUploadWithUseCallback({cloudinaryAssetId:result.info.public_id,imageMetaPrivate:_objectSpread(_objectSpread({},result.info),{},{metaOrigin:"private"})})),result&&"hidden"===result.info&&setTimeout((function(){document.body.style.removeProperty("overflow")}),100)}));return setWidget(theWidget),function(){return theWidget.destroy()}}setTimeout((function(){return setRerenderDummyFn((new Date).getTime())}),20)}),[intent,onUploadWithUseCallback,store]),__jsx(_uiLib__WEBPACK_IMPORTED_MODULE_3__.zx,{className:(0,tailwind_merge__WEBPACK_IMPORTED_MODULE_7__.m)("leading-tight",className),intent:required&&!isReplace?"primary":"secondary",onClick:function launchWidget(){widget&&widget.open(),store.trackEvent(_lib_trackingEvents__WEBPACK_IMPORTED_MODULE_6__.M.bcImageUpload,{imgIntent:intent})}},isReplace?"Replace image":"Upload image")};ImageUpload.displayName="ImageUpload",ImageUpload.__docgenInfo={description:"",methods:[],displayName:"ImageUpload",props:{intent:{required:!0,tsType:{name:"CldImageIntent"},description:""},onUploadWithUseCallback:{required:!0,tsType:{name:"signature",type:"function",raw:"(result: UploadResult) => void",signature:{arguments:[{name:"result",type:{name:"signature",type:"object",raw:"{\n  cloudinaryAssetId: string\n  imageMetaPrivate: CldImageMetaPrivate\n}",signature:{properties:[{key:"cloudinaryAssetId",value:{name:"string",required:!0}},{key:"imageMetaPrivate",value:{name:"CldImageMetaPrivate",required:!0}}]}}}],return:{name:"void"}}},description:""},className:{required:!1,tsType:{name:"string"},description:""},isReplace:{required:!1,tsType:{name:"boolean"},description:""},required:{required:!1,tsType:{name:"boolean"},description:""}}};const __WEBPACK_DEFAULT_EXPORT__=ImageUpload;try{ImageUpload.displayName="ImageUpload",ImageUpload.__docgenInfo={description:"",displayName:"ImageUpload",props:{intent:{defaultValue:null,description:"",name:"intent",required:!0,type:{name:"CldImageIntent"}},onUploadWithUseCallback:{defaultValue:null,description:"",name:"onUploadWithUseCallback",required:!0,type:{name:"(result: UploadResult) => void"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},isReplace:{defaultValue:null,description:"",name:"isReplace",required:!1,type:{name:"boolean"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ImageUpload.tsx#ImageUpload"]={docgenInfo:ImageUpload.__docgenInfo,name:"ImageUpload",path:"src/components/ImageUpload.tsx#ImageUpload"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/ImageUploadAppShell.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _home_runner_work_Didthis_Didthis_appserver_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),_home_runner_work_Didthis_Didthis_appserver_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_home_runner_work_Didthis_Didthis_appserver_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@babel/runtime/regenerator/index.js"),_home_runner_work_Didthis_Didthis_appserver_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_home_runner_work_Didthis_Didthis_appserver_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1__),_uiLib__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/uiLib/index.tsx"),_lib_store__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/lib/store/index.tsx"),_lib_trackingEvents__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/lib/trackingEvents.ts"),tailwind_merge__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/tailwind-merge/dist/lib/tw-merge.mjs"),_lib_appShellContent__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/lib/appShellContent/index.ts"),console=__webpack_require__("./node_modules/console-browserify/index.js"),__jsx=react__WEBPACK_IMPORTED_MODULE_0__.createElement;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,_home_runner_work_Didthis_Didthis_appserver_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var ImageUploadAppShell=function ImageUploadAppShell(_ref){var intent=_ref.intent,onUploadWithUseCallback=_ref.onUploadWithUseCallback,className=_ref.className,isReplace=_ref.isReplace,required=_ref.required,appShell=(0,_lib_appShellContent__WEBPACK_IMPORTED_MODULE_6__.ZP)(),store=(0,_lib_store__WEBPACK_IMPORTED_MODULE_4__.oR)(),handlePickImage=function(){var _ref2=(0,_home_runner_work_Didthis_Didthis_appserver_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_7__.Z)(_home_runner_work_Didthis_Didthis_appserver_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().mark((function _callee(){var _result;return _home_runner_work_Didthis_Didthis_appserver_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,appShell.api.request("pickImage",{intent:"post"});case 3:if((_result=_context.sent)&&!("cancelled"in _result)){_context.next=6;break}return _context.abrupt("return");case 6:store.trackEvent(_lib_trackingEvents__WEBPACK_IMPORTED_MODULE_5__.M.caUploadImage,{imgIntent:intent}),onUploadWithUseCallback({cloudinaryAssetId:_result.public_id,imageMetaPrivate:_objectSpread(_objectSpread({},_result),{},{image_metadata:_objectSpread(_objectSpread({},_result.image_metadata),_result.exif),metaOrigin:"private"})}),_context.next=14;break;case 10:_context.prev=10,_context.t0=_context.catch(0),window.alert("Image upload failed, please try again later. Reason: ".concat(_context.t0)),console.error("image upload failed",_context.t0);case 14:case"end":return _context.stop()}}),_callee,null,[[0,10]])})));return function handlePickImage(){return _ref2.apply(this,arguments)}}();return __jsx(_uiLib__WEBPACK_IMPORTED_MODULE_3__.zx,{className:(0,tailwind_merge__WEBPACK_IMPORTED_MODULE_8__.m)("leading-tight",className),intent:required&&!isReplace?"primary":"secondary",onClick:handlePickImage},isReplace?"Replace image":"Upload image")};ImageUploadAppShell.displayName="ImageUploadAppShell",ImageUploadAppShell.__docgenInfo={description:"",methods:[],displayName:"ImageUploadAppShell",props:{intent:{required:!0,tsType:{name:"CldImageIntent"},description:""},onUploadWithUseCallback:{required:!0,tsType:{name:"signature",type:"function",raw:"(result: UploadResult) => void",signature:{arguments:[{name:"result",type:{name:"signature",type:"object",raw:"{\n  cloudinaryAssetId: string\n  imageMetaPrivate: CldImageMetaPrivate\n}",signature:{properties:[{key:"cloudinaryAssetId",value:{name:"string",required:!0}},{key:"imageMetaPrivate",value:{name:"CldImageMetaPrivate",required:!0}}]}}}],return:{name:"void"}}},description:""},className:{required:!1,tsType:{name:"string"},description:""},isReplace:{required:!1,tsType:{name:"boolean"},description:""},required:{required:!1,tsType:{name:"boolean"},description:""}}};const __WEBPACK_DEFAULT_EXPORT__=ImageUploadAppShell;try{ImageUploadAppShell.displayName="ImageUploadAppShell",ImageUploadAppShell.__docgenInfo={description:"",displayName:"ImageUploadAppShell",props:{intent:{defaultValue:null,description:"",name:"intent",required:!0,type:{name:"CldImageIntent"}},onUploadWithUseCallback:{defaultValue:null,description:"",name:"onUploadWithUseCallback",required:!0,type:{name:"(result: UploadResult) => void"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},isReplace:{defaultValue:null,description:"",name:"isReplace",required:!1,type:{name:"boolean"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ImageUploadAppShell.tsx#ImageUploadAppShell"]={docgenInfo:ImageUploadAppShell.__docgenInfo,name:"ImageUploadAppShell",path:"src/components/ImageUploadAppShell.tsx#ImageUploadAppShell"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/forms/ProjectForm.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _home_runner_work_Didthis_Didthis_appserver_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),_home_runner_work_Didthis_Didthis_appserver_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/createClass.js"),_home_runner_work_Didthis_Didthis_appserver_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),mobx_react_lite__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/mobx-react-lite/es/index.js"),_lib_store__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/lib/store/index.tsx"),_components_uiLib__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/uiLib/index.tsx"),_lib_profileUtils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/lib/profileUtils.ts"),_lib_pathBuilder__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/lib/pathBuilder.ts"),next_router__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/next/router.js"),_ImageUpload__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/components/ImageUpload.tsx"),mobx__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/mobx/dist/mobx.esm.js"),_lib_trackingEvents__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/lib/trackingEvents.ts"),_auth_ClaimTrialAccountButton__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/components/auth/ClaimTrialAccountButton.tsx"),_lib_appShellContent__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./src/lib/appShellContent/index.ts"),_ImageUploadAppShell__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/components/ImageUploadAppShell.tsx"),__jsx=react__WEBPACK_IMPORTED_MODULE_0__.createElement,ProjectStore=function(){function ProjectStore(mode,profile,project){if((0,_home_runner_work_Didthis_Didthis_appserver_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,ProjectStore),(0,_home_runner_work_Didthis_Didthis_appserver_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_13__.Z)(this,"title",void 0),(0,_home_runner_work_Didthis_Didthis_appserver_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_13__.Z)(this,"titleTouched",!1),(0,_home_runner_work_Didthis_Didthis_appserver_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_13__.Z)(this,"description",void 0),(0,_home_runner_work_Didthis_Didthis_appserver_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_13__.Z)(this,"scope",void 0),(0,_home_runner_work_Didthis_Didthis_appserver_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_13__.Z)(this,"projectId",void 0),(0,_home_runner_work_Didthis_Didthis_appserver_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_13__.Z)(this,"imageAssetId",void 0),(0,_home_runner_work_Didthis_Didthis_appserver_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_13__.Z)(this,"imageMeta",void 0),(0,_home_runner_work_Didthis_Didthis_appserver_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_13__.Z)(this,"currentStatus",void 0),(0,_home_runner_work_Didthis_Didthis_appserver_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_13__.Z)(this,"shareByDefault",void 0),(0,_home_runner_work_Didthis_Didthis_appserver_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_13__.Z)(this,"spinning",!1),"new"===mode){var _profile$connectedAcc,profileCopy=JSON.parse(JSON.stringify(profile)),r=_lib_profileUtils__WEBPACK_IMPORTED_MODULE_4__.Z.mkNewProject(profileCopy);this.title="",this.description=r.project.description||"",this.scope=r.project.scope,this.projectId=r.project.id,this.imageAssetId=r.project.imageAssetId||"",this.currentStatus=r.project.currentStatus;var defaultShareByDefault=null===(_profile$connectedAcc=profile.connectedAccounts)||void 0===_profile$connectedAcc||null===(_profile$connectedAcc=_profile$connectedAcc.discord)||void 0===_profile$connectedAcc?void 0:_profile$connectedAcc.shareByDefault;this.shareByDefault=!1!==defaultShareByDefault}else{if(!project)throw new Error("project is required in constructor if mode != new");this.title=project.title,this.titleTouched=!0,this.description=project.description||"",this.scope=project.scope,this.projectId=project.id,this.imageAssetId=project.imageAssetId||"",this.imageMeta=project.imageMeta,this.currentStatus=project.currentStatus,this.shareByDefault=!1!==project.shareByDefault}(0,mobx__WEBPACK_IMPORTED_MODULE_14__.ky)(this,{})}return(0,_home_runner_work_Didthis_Didthis_appserver_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_15__.Z)(ProjectStore,[{key:"getApiProject",value:function getApiProject(){return{id:this.projectId,createdAt:0,updatedAt:0,title:this.title,scope:this.scope,currentStatus:this.currentStatus,description:this.description.trim(),imageAssetId:this.imageAssetId||void 0,imageMeta:this.imageMeta,shareByDefault:this.shareByDefault,posts:{}}}},{key:"setTitle",value:function setTitle(x){this.title=x,this.titleTouched=!0}},{key:"setDescription",value:function setDescription(x){this.description=x}},{key:"setCurrentStatus",value:function setCurrentStatus(x){this.currentStatus=x}},{key:"setScope",value:function setScope(x){this.scope=x}},{key:"setShareByDefault",value:function setShareByDefault(x){this.shareByDefault=x}},{key:"setImageAssetId",value:function setImageAssetId(assetId,meta){this.imageAssetId=assetId,this.imageMeta=meta}},{key:"setSpinning",value:function setSpinning(x){this.spinning=x}},{key:"isPostable",value:function isPostable(){return!!this.title.trim()&&(!(this.title.trim().length>_lib_profileUtils__WEBPACK_IMPORTED_MODULE_4__.Z.maxChars.title)&&!(this.description.trim().length>_lib_profileUtils__WEBPACK_IMPORTED_MODULE_4__.Z.maxChars.blurb))}}]),ProjectStore}(),ProjectForm=(0,mobx_react_lite__WEBPACK_IMPORTED_MODULE_1__.Pi)((function(props){var mode=props.mode,router=(0,next_router__WEBPACK_IMPORTED_MODULE_6__.useRouter)(),store=(0,_lib_store__WEBPACK_IMPORTED_MODULE_2__.oR)(),appShell=(0,_lib_appShellContent__WEBPACK_IMPORTED_MODULE_10__.ZP)(),user=store.user;if(!user)return __jsx(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null);var projectStore=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)((function(){return new ProjectStore(mode,user.profile,"edit"===mode?props.project:void 0)}))[0],performSubmit=function performSubmit(){projectStore.setSpinning(!0),store.saveProject(projectStore.getApiProject(),mode,"edit"===mode?props.project:void 0).then((function(newProject){store.user&&router.push(_lib_pathBuilder__WEBPACK_IMPORTED_MODULE_5__.Z.project(store.user.systemSlug,newProject.id))}))},onImageUpload=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(res){projectStore.setImageAssetId(res.cloudinaryAssetId,res.imageMetaPrivate)}),[projectStore]),handleCancel=function handleCancel(){store.goBack()},ImageUpload=appShell.appReady?_ImageUploadAppShell__WEBPACK_IMPORTED_MODULE_11__.Z:_ImageUpload__WEBPACK_IMPORTED_MODULE_7__.Z;return(0,_lib_appShellContent__WEBPACK_IMPORTED_MODULE_10__.xd)({show:!0,title:"".concat("new"===mode?"Create":"Edit"," project"),leftIsBack:!0,leftLabel:"Back",rightLabel:"new"===mode?"Create":"Save",rightIsDisabled:!projectStore.isPostable(),onLeftPress:handleCancel,onRightPress:performSubmit}),__jsx("div",null,__jsx("form",{onSubmit:function handleSubmit(e){e.stopPropagation(),e.preventDefault(),performSubmit()},method:"POST",className:"flex flex-col gap-8"},__jsx("div",null,__jsx("label",{htmlFor:"title",className:"text-form-labels text-sm"},"Project title:",__jsx(_components_uiLib__WEBPACK_IMPORTED_MODULE_3__.II,{type:"text",id:"title",name:"title",value:projectStore.title||"",onChange:function setTitle(e){projectStore.setTitle(e.target.value)},className:"mt-2 text-bodytext",required:!0,touched:projectStore.titleTouched,maxLen:_lib_profileUtils__WEBPACK_IMPORTED_MODULE_4__.Z.maxChars.title}))),__jsx("div",null,__jsx("label",{htmlFor:"description",className:"text-form-labels text-sm"},"Project description:",__jsx(_components_uiLib__WEBPACK_IMPORTED_MODULE_3__.gx,{placeholder:"",id:"description",name:"description",value:projectStore.description||"",onChange:function setDescription(e){projectStore.setDescription(e.target.value)},className:"mt-2 text-bodytext",touched:!0,maxLen:_lib_profileUtils__WEBPACK_IMPORTED_MODULE_4__.Z.maxChars.blurb}))),__jsx("div",null,__jsx("label",{htmlFor:"status",className:"text-form-labels text-sm"},"Status:",__jsx(_components_uiLib__WEBPACK_IMPORTED_MODULE_3__.Ph,{id:"status",onChange:function setStatus(e){projectStore.setCurrentStatus(e.target.value)},value:projectStore.currentStatus,className:"mt-2 text-bodytext"},__jsx("option",{key:"active",value:"active"},"Active"),__jsx("option",{key:"complete",value:"complete"},"Complete"),__jsx("option",{key:"paused",value:"paused"},"Paused")))),__jsx("div",null,__jsx("div",{className:"text-form-labels text-sm mb-2"},"Project cover image:"),projectStore.imageAssetId&&__jsx(_components_uiLib__WEBPACK_IMPORTED_MODULE_3__.tB,{assetId:projectStore.imageAssetId,intent:"project",lightbox:!0}),__jsx("div",{className:"flex flex-row gap-4 mt-4 w-full sm:w-auto"},__jsx(ImageUpload,{intent:"project",onUploadWithUseCallback:onImageUpload,isReplace:!!projectStore.imageAssetId,className:"grow sm:grow-0"}),projectStore.imageAssetId&&__jsx(_components_uiLib__WEBPACK_IMPORTED_MODULE_3__.zx,{intent:"secondary",onClick:function deleteImage(){projectStore.setImageAssetId("",void 0)},className:"grow sm:grow-0 leading-tight",trackEvent:_lib_trackingEvents__WEBPACK_IMPORTED_MODULE_8__.M.bcRemoveImage,trackEventOpts:{imgIntent:"project"}},"Remove image"))),__jsx("div",null,__jsx("label",{htmlFor:"visibility",className:"inline-flex flex-row items-center cursor-pointer"},__jsx("span",{className:"mr-3 text-sm text-form-labels inline-block cursor-pointer"},"Public project:"),__jsx("span",{className:"relative inline-flex items-center inline-block"},__jsx("input",{type:"checkbox",id:"visibility",value:"private",className:"sr-only peer",disabled:user.isTrial,checked:"private"!==projectStore.scope,onChange:function setVisibility(e){projectStore.setScope(e.target.checked?"public":"private")}}),__jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-form-toggle-bg peer-disabled:opacity-75"}))),__jsx("p",{className:"text-sm my-4"},"You can share your project out to others when you make your project public."),user.isTrial&&__jsx("p",{className:"my-4 p-4 text-sm bg-yellow-100"},"Heads up: To make a project public (and to manage it from other devices), you’ll need to"," ",__jsx(_auth_ClaimTrialAccountButton__WEBPACK_IMPORTED_MODULE_9__.T,{intent:"link",text:"sign up"})," first.")),"private"!==projectStore.scope&&__jsx("div",null,__jsx("label",{className:"inline-flex flex-row items-center cursor-pointer"},__jsx("span",{className:"mr-3 text-sm text-form-labels inline-block cursor-pointer"},"Automatically share updates by default:"),__jsx("span",{className:"relative inline-flex items-center inline-block"},__jsx("input",{type:"checkbox",id:"shareByDefault",value:"private",className:"sr-only peer",disabled:user.isTrial,checked:projectStore.shareByDefault,onChange:function setShareByDefault(e){projectStore.setShareByDefault(e.target.checked)}}),__jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-form-toggle-bg peer-disabled:opacity-75"}))),__jsx("p",{className:"text-sm my-4"},"You can decide on a per-update basis to automatically share updates to connected accounts, with this setting as the default choice.")),__jsx("div",{className:"flex flex-col sm:flex-row gap-4 flex-wrap"},!appShell.inAppWebView&&__jsx(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,__jsx(_components_uiLib__WEBPACK_IMPORTED_MODULE_3__.zx,{spinning:projectStore.spinning,type:"submit",disabled:!projectStore.isPostable(),className:"w-full sm:w-[150px]"},"new"===mode?"Create":"Save"),__jsx(_components_uiLib__WEBPACK_IMPORTED_MODULE_3__.zx,{intent:"secondary",onClick:handleCancel,className:"w-full sm:w-[150px]",trackEvent:_lib_trackingEvents__WEBPACK_IMPORTED_MODULE_8__.M.bcDiscardChanges,trackEventOpts:{fromPage:"projectEdit"}},"edit"===mode?"Discard changes":"Cancel")),"edit"===mode&&__jsx("div",{className:"text-center sm:w-full sm:text-left"},__jsx(_components_uiLib__WEBPACK_IMPORTED_MODULE_3__.zx,{intent:"link",className:"text-red-500",onClick:function onClick(){return store.promptDeleteProject(projectStore.getApiProject())}},"Delete project")))))}));const __WEBPACK_DEFAULT_EXPORT__=ProjectForm;try{ProjectForm.displayName="ProjectForm",ProjectForm.__docgenInfo={description:"",displayName:"ProjectForm",props:{mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"new"'},{value:'"edit"'}]}},project:{defaultValue:null,description:"",name:"project",required:!0,type:{name:"ApiProject"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/forms/ProjectForm.tsx#ProjectForm"]={docgenInfo:ProjectForm.__docgenInfo,name:"ProjectForm",path:"src/components/forms/ProjectForm.tsx#ProjectForm"})}catch(__react_docgen_typescript_loader_error){}},"./src/lib/appShellContent/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{ZP:()=>useAppShell,nH:()=>useAppShellListener,xd:()=>useAppShellTopBar});var react=__webpack_require__("./node_modules/react/index.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),classCallCheck=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),createClass=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/createClass.js"),regenerator=__webpack_require__("./node_modules/@babel/runtime/regenerator/index.js"),regenerator_default=__webpack_require__.n(regenerator),console=__webpack_require__("./node_modules/console-browserify/index.js");function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,defineProperty.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var MESSAGE_EVENT="AppShellMessage",MessageHandler=function(){function MessageHandler(){(0,classCallCheck.Z)(this,MessageHandler),(0,defineProperty.Z)(this,"pendingRequests",void 0),(0,defineProperty.Z)(this,"listener",void 0),(0,defineProperty.Z)(this,"lastId",void 0),this.pendingRequests={},this.listener=void 0,this.lastId=0}var _request;return(0,createClass.Z)(MessageHandler,[{key:"generateRequestId",value:function generateRequestId(){return this.lastId++,"request-".concat(this.lastId)}},{key:"getWebView",value:function getWebView(){if("undefined"!=typeof window&&void 0!==window.ReactNativeWebView&&void 0!==window.ReactNativeWebView.postMessage)return window.ReactNativeWebView}},{key:"request",value:(_request=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(method,payload){var request,_this=this;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return request={type:"request",id:this.generateRequestId(),method,payload},_context.abrupt("return",new Promise((function(resolve,reject){var webview=_this.getWebView();if(!webview)return reject(new Error("not in app shell"));_this.pendingRequests[request.id]=_objectSpread(_objectSpread({},request),{},{resolve,reject}),webview.postMessage(JSON.stringify(request))})));case 2:case"end":return _context.stop()}}),_callee,this)}))),function request(_x,_x2){return _request.apply(this,arguments)})},{key:"listen",value:function listen(){this.listener&&this.unlisten(),this.listener=this.handleMessage.bind(this),window.addEventListener("message",this.listener),document.addEventListener("message",this.listener)}},{key:"unlisten",value:function unlisten(){this.listener&&(window.removeEventListener("message",this.listener),document.removeEventListener("message",this.listener))}},{key:"handleMessage",value:function handleMessage(event){try{if(void 0===event.data)return;var dataEvent=event,_JSON$parse=JSON.parse(dataEvent.data),type=_JSON$parse.type,_id=_JSON$parse.id,_payload=_JSON$parse.payload;if(document.dispatchEvent(new CustomEvent(MESSAGE_EVENT,{detail:{type,id:_id,payload:_payload}})),"response"===type){var pending=this.pendingRequests[_id];pending&&"object"==typeof _payload&&(delete this.pendingRequests[_id],"failure"in _payload?pending.reject(_payload):pending.resolve(_payload))}}catch(e){console.error("Failed to handle message",e)}}}]),MessageHandler}();function useAppShellListener(expectedType,handler){var listener=(0,react.useRef)();(0,react.useEffect)((function(){if(handler)return"undefined"!=typeof document&&(listener.current=function(ev){var detail=ev.detail,type=detail.type,payload=detail.payload,id=detail.id;expectedType===type&&handler(payload,id)},document.addEventListener(MESSAGE_EVENT,listener.current)),function(){listener.current&&document.removeEventListener(MESSAGE_EVENT,listener.current)}}),[expectedType,handler,listener])}const api=function(){function AppShellAPI(){(0,classCallCheck.Z)(this,AppShellAPI),(0,defineProperty.Z)(this,"messaging",void 0),this.messaging=new MessageHandler}var _request;return(0,createClass.Z)(AppShellAPI,[{key:"isInWebView",value:function isInWebView(){return!!this.messaging.getWebView()}},{key:"init",value:function init(){this.messaging.listen()}},{key:"deinit",value:function deinit(){this.messaging.unlisten()}},{key:"request",value:(_request=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(method,payload){return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!this.isInWebView()){_context.next=2;break}return _context.abrupt("return",this.messaging.request(method,payload));case 2:case"end":return _context.stop()}}),_callee,this)}))),function request(_x,_x2){return _request.apply(this,arguments)})}]),AppShellAPI}();function state_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function state_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?state_ownKeys(Object(source),!0).forEach((function(key){(0,defineProperty.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):state_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function createInitialState(){return{inAppWebView:!1,appReady:!1,appVersionInfo:{},api:new api}}function reducer(state,action){return"update"===action.type?state_objectSpread(state_objectSpread({},state),{},(0,defineProperty.Z)({},action.key,action.value)):state}var config=__webpack_require__("./node_modules/next/config.js"),config_default=__webpack_require__.n(config),next_router=__webpack_require__("./node_modules/next/router.js"),lib_store=__webpack_require__("./src/lib/store/index.tsx"),pathBuilder=__webpack_require__("./src/lib/pathBuilder.ts"),trackingEvents=__webpack_require__("./src/lib/trackingEvents.ts"),__jsx=react.createElement,publicRuntimeConfig=config_default()().publicRuntimeConfig,SERVER_VERSION=null==publicRuntimeConfig?void 0:publicRuntimeConfig.version,SERVER_BUILD=null==publicRuntimeConfig?void 0:publicRuntimeConfig.build,SERVER_TAG=null==publicRuntimeConfig?void 0:publicRuntimeConfig.tag,AppShellContext=(0,react.createContext)(createInitialState());function AppShellContextProvider(_ref){var children=_ref.children,_useAppShellState=function useAppShellState(){var _useReducer=(0,react.useReducer)(reducer,null,createInitialState);return[_useReducer[0],_useReducer[1]]}(),_useAppShellState2=(0,slicedToArray.Z)(_useAppShellState,2),state=_useAppShellState2[0],dispatch=_useAppShellState2[1],router=(0,next_router.useRouter)(),store=(0,lib_store.oR)(),inAppWebView=state.inAppWebView,api=state.api,isInWebView=api.isInWebView();return isInWebView&&(store.appShellApiRef=api),(0,react.useEffect)((function(){dispatch({type:"update",key:"inAppWebView",value:!!isInWebView})}),[isInWebView,dispatch]),(0,react.useEffect)((function(){if(inAppWebView)return api.init(),api.request("ping",{version:SERVER_VERSION,build:SERVER_BUILD,tag:SERVER_TAG}).then((function(){dispatch({type:"update",key:"appVersionInfo",value:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}),dispatch({type:"update",key:"appReady",value:!0})})),function(){return api.deinit()}}),[inAppWebView,api,dispatch]),(0,react.useEffect)((function(){var handleRouteChangeStart=function handleRouteChangeStart(url){api.request("webviewRouterEvent",{event:"routeChangeStart",url})},handleRouteChangeComplete=function handleRouteChangeComplete(url){api.request("webviewRouterEvent",{event:"routeChangeComplete",url}),api.request("updateTopNav",{show:!1})};router.events.on("routeChangeStart",handleRouteChangeStart),router.events.on("routeChangeComplete",handleRouteChangeComplete);var deregUserListen=store.registerUserListener((function(theUser){theUser&&api.request("updateAppConfig",{user:theUser,links:{user:pathBuilder.Z.user(theUser.systemSlug),userEdit:pathBuilder.Z.userEdit(theUser.systemSlug),newPost:pathBuilder.Z.newPost(theUser.systemSlug)}})}));return function(){deregUserListen(),router.events.off("routeChangeStart",handleRouteChangeStart),router.events.off("routeChangeComplete",handleRouteChangeComplete)}}),[api,router,store,state.appReady]),useAppShellListener("trackNativeEvent",(function(_ref2){var event=_ref2.event;"bcNativeDrawerOpen"===event&&store.trackEvent(trackingEvents.M.bcNativeDrawerOpen),"bcNativeDrawerCreateProject"===event&&store.trackEvent(trackingEvents.M.bcNativeDrawerCreateProject),"bcNativeDrawerProject"===event&&store.trackEvent(trackingEvents.M.bcNativeDrawerProject)})),useAppShellListener("navigateToPath",(function(_ref3){var path=_ref3.path;return router.push(path)})),__jsx(AppShellContext.Provider,{value:state},children)}AppShellContextProvider.displayName="AppShellContextProvider",AppShellContextProvider.__docgenInfo={description:"",methods:[],displayName:"AppShellContextProvider",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""}}};try{context.displayName="context",context.__docgenInfo={description:"",displayName:"context",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/lib/appShellContent/context.tsx#context"]={docgenInfo:context.__docgenInfo,name:"context",path:"src/lib/appShellContent/context.tsx#context"})}catch(__react_docgen_typescript_loader_error){}var objectWithoutProperties=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),_excluded=["onLeftPress","onRightPress","onSharePress","onEditPress"],noop=function noop(){};function useAppShellTopBar(params){var _params$onLeftPress=params.onLeftPress,onLeftPress=void 0===_params$onLeftPress?noop:_params$onLeftPress,_params$onRightPress=params.onRightPress,onRightPress=void 0===_params$onRightPress?noop:_params$onRightPress,_params$onSharePress=params.onSharePress,onSharePress=void 0===_params$onSharePress?noop:_params$onSharePress,_params$onEditPress=params.onEditPress,onEditPress=void 0===_params$onEditPress?noop:_params$onEditPress,state=(0,objectWithoutProperties.Z)(params,_excluded),appShell=useAppShell();useAppShellListener("topNavLeftPress",onLeftPress),useAppShellListener("topNavRightPress",onRightPress),useAppShellListener("topNavSharePress",onSharePress),useAppShellListener("topNavEditPress",onEditPress),(0,react.useEffect)((function(){appShell.api.request("updateTopNav",state)}),[state,appShell.api])}try{useAppShellTopBar.displayName="useAppShellTopBar",useAppShellTopBar.__docgenInfo={description:"",displayName:"useAppShellTopBar",props:{show:{defaultValue:null,description:"",name:"show",required:!1,type:{name:"boolean"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},leftIsBack:{defaultValue:null,description:"",name:"leftIsBack",required:!1,type:{name:"boolean"}},leftLabel:{defaultValue:null,description:"",name:"leftLabel",required:!1,type:{name:"string"}},leftIsDisabled:{defaultValue:null,description:"",name:"leftIsDisabled",required:!1,type:{name:"boolean"}},rightLabel:{defaultValue:null,description:"",name:"rightLabel",required:!1,type:{name:"string"}},rightIsDisabled:{defaultValue:null,description:"",name:"rightIsDisabled",required:!1,type:{name:"boolean"}},showShare:{defaultValue:null,description:"",name:"showShare",required:!1,type:{name:"boolean"}},shareIsDisabled:{defaultValue:null,description:"",name:"shareIsDisabled",required:!1,type:{name:"boolean"}},showEdit:{defaultValue:null,description:"",name:"showEdit",required:!1,type:{name:"boolean"}},editIsDisabled:{defaultValue:null,description:"",name:"editIsDisabled",required:!1,type:{name:"boolean"}},onLeftPress:{defaultValue:null,description:"",name:"onLeftPress",required:!1,type:{name:"(() => void)"}},onRightPress:{defaultValue:null,description:"",name:"onRightPress",required:!1,type:{name:"(() => void)"}},onSharePress:{defaultValue:null,description:"",name:"onSharePress",required:!1,type:{name:"(() => void)"}},onEditPress:{defaultValue:null,description:"",name:"onEditPress",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/lib/appShellContent/ui.tsx#useAppShellTopBar"]={docgenInfo:useAppShellTopBar.__docgenInfo,name:"useAppShellTopBar",path:"src/lib/appShellContent/ui.tsx#useAppShellTopBar"})}catch(__react_docgen_typescript_loader_error){}function useAppShell(){return(0,react.useContext)(AppShellContext)}},"./src/mocks/apiProject.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={id:"project-8675309",createdAt:0,updatedAt:0,title:"Sample Project",description:"This is an example description",scope:"private",currentStatus:"active",posts:{}}},"./src/mocks/apiUser.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{OC:()=>apiUserBlankSlate,SX:()=>apiUserWithProject,ZP:()=>__WEBPACK_DEFAULT_EXPORT__,gh:()=>apiUser});var _home_runner_work_Didthis_Didthis_appserver_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),_apiProject__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/mocks/apiProject.ts");function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,_home_runner_work_Didthis_Didthis_appserver_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var apiUserBlankSlate={id:"8675309",systemSlug:"8675309",publicPageSlug:"jrandom",userSlug:void 0,isTrial:!1,profile:{name:void 0,bio:void 0,socialUrls:void 0,imageAssetId:void 0,imageMeta:void 0,updatedAt:0,projects:{}},createdAt:0},apiUser={id:"8675309",systemSlug:"8675309",publicPageSlug:"jrandom",userSlug:"jrandom",isTrial:!1,profile:{name:"J Random Hacker",bio:void 0,socialUrls:void 0,imageAssetId:void 0,imageMeta:void 0,updatedAt:0,projects:{}},createdAt:0},apiUserWithProject=_objectSpread(_objectSpread({},apiUser),{},{profile:_objectSpread(_objectSpread({},apiUser.profile),{},{projects:(0,_home_runner_work_Didthis_Didthis_appserver_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__.Z)({},_apiProject__WEBPACK_IMPORTED_MODULE_1__.Z.id,_apiProject__WEBPACK_IMPORTED_MODULE_1__.Z)})});const __WEBPACK_DEFAULT_EXPORT__=apiUser}}]);